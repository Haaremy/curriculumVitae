(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[147],{1069:function(e,a,m){Promise.resolve().then(m.bind(m,5676))},5676:function(e,a,m){"use strict";m.d(a,{default:function(){return s}});var p=m(7437),g=m(2265);function s(e){let{teams:a}=e,{ids:m,pins:s}=a,[t,r]=(0,g.useState)(""),[n,u]=(0,g.useState)(""),[o,i]=(0,g.useState)({}),[b,c]=(0,g.useState)(!1),[l,N]=(0,g.useState)(!1),[d,T]=(0,g.useState)([!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1]),[h,y]=(0,g.useState)(null),[f,x]=(0,g.useState)(""),[w,k]=(0,g.useState)({name:"",punkte:0,player1:"",player2:"",player3:"",player4:"",games:{game1:[{p1:0,p2:0,p3:0,p4:0,pT:0,stamp:""}],game2:[{p1:0,p2:0,p3:0,p4:0,pT:0,stamp:""}],game3:[{p1:0,p2:0,p3:0,p4:0,pT:0,stamp:""}],game4:[{p1:0,p2:0,p3:0,p4:0,pT:0,stamp:""}],game5:[{p1:0,p2:0,p3:0,p4:0,pT:0,stamp:""}],game6:[{p1:0,p2:0,p3:0,p4:0,pT:0,stamp:""}],game7:[{p1:0,p2:0,p3:0,p4:0,pT:0,stamp:""}],game8:[{p1:0,p2:0,p3:0,p4:0,pT:0,stamp:""}],game9:[{p1:0,p2:0,p3:0,p4:0,pT:0,stamp:""}],game10:[{p1:0,p2:0,p3:0,p4:0,pT:0,stamp:""}],game11:[{p1:0,p2:0,p3:0,p4:0,pT:0,stamp:""}],game12:[{p1:0,p2:0,p3:0,p4:0,pT:0,stamp:""}],game13:[{p1:0,p2:0,p3:0,p4:0,pT:0,stamp:""}],game14:[{p1:0,p2:0,p3:0,p4:0,pT:0,stamp:""}],game15:[{p1:0,p2:0,p3:0,p4:0,pT:0,stamp:""}],game16:[{p1:0,p2:0,p3:0,p4:0,pT:0,stamp:""}],game17:[{p1:0,p2:0,p3:0,p4:0,pT:0,stamp:""}],game18:[{p1:0,p2:0,p3:0,p4:0,pT:0,stamp:""}],game19:[{p1:0,p2:0,p3:0,p4:0,pT:0,stamp:""}],game20:[{p1:0,p2:0,p3:0,p4:0,pT:0,stamp:""}],game21:[{p1:0,p2:0,p3:0,p4:0,pT:0,stamp:""}],game22:[{p1:0,p2:0,p3:0,p4:0,pT:0,stamp:""}],game23:[{p1:0,p2:0,p3:0,p4:0,pT:0,stamp:""}],game24:[{p1:0,p2:0,p3:0,p4:0,pT:0,stamp:""}]}}),j=new Date(Date.now()).toLocaleString("de-DE",{day:"numeric",month:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"}),v=async e=>{c(!0),y(null);try{let a="/christmas/teams/".concat(e,".json");if(x(e),(await fetch(a,{method:"HEAD"})).ok){let m=await fetch(a),p=await m.json();i(a=>({...a,[e]:p}))}else{let a={name:"",punkte:0,player1:"",player2:"",player3:"",player4:"",games:{game1:[{p1:0,p2:0,p3:0,p4:0,pT:0,stamp:""}],game2:[{p1:0,p2:0,p3:0,p4:0,pT:0,stamp:""}],game3:[{p1:0,p2:0,p3:0,p4:0,pT:0,stamp:""}],game4:[{p1:0,p2:0,p3:0,p4:0,pT:0,stamp:""}],game5:[{p1:0,p2:0,p3:0,p4:0,pT:0,stamp:""}],game6:[{p1:0,p2:0,p3:0,p4:0,pT:0,stamp:""}],game7:[{p1:0,p2:0,p3:0,p4:0,pT:0,stamp:""}],game8:[{p1:0,p2:0,p3:0,p4:0,pT:0,stamp:""}],game9:[{p1:0,p2:0,p3:0,p4:0,pT:0,stamp:""}],game10:[{p1:0,p2:0,p3:0,p4:0,pT:0,stamp:""}],game11:[{p1:0,p2:0,p3:0,p4:0,pT:0,stamp:""}],game12:[{p1:0,p2:0,p3:0,p4:0,pT:0,stamp:""}],game13:[{p1:0,p2:0,p3:0,p4:0,pT:0,stamp:""}],game14:[{p1:0,p2:0,p3:0,p4:0,pT:0,stamp:""}],game15:[{p1:0,p2:0,p3:0,p4:0,pT:0,stamp:""}],game16:[{p1:0,p2:0,p3:0,p4:0,pT:0,stamp:""}],game17:[{p1:0,p2:0,p3:0,p4:0,pT:0,stamp:""}],game18:[{p1:0,p2:0,p3:0,p4:0,pT:0,stamp:""}],game19:[{p1:0,p2:0,p3:0,p4:0,pT:0,stamp:""}],game20:[{p1:0,p2:0,p3:0,p4:0,pT:0,stamp:""}],game21:[{p1:0,p2:0,p3:0,p4:0,pT:0,stamp:""}],game22:[{p1:0,p2:0,p3:0,p4:0,pT:0,stamp:""}],game23:[{p1:0,p2:0,p3:0,p4:0,pT:0,stamp:""}],game24:[{p1:0,p2:0,p3:0,p4:0,pT:0,stamp:""}]}};i(m=>({...m,[e]:a})),await fetch("/api/saveTeamData",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e,teamData:a})})}}catch(e){y(e instanceof Error?e.message:"An unknown error occurred")}finally{c(!1)}};(0,g.useEffect)(()=>{m.length>0&&m.forEach(e=>{v(e)})},[m]);let C=(e,a)=>{let{value:m}=e.target;k(e=>({...e,[a]:m}))},S=()=>{let e;e=0,w.games.game1[0].pT=(Number(w.games.game1[0].p1)||0)+(Number(w.games.game1[0].p2)||0)+(Number(w.games.game1[0].p3)||0)+(Number(w.games.game1[0].p4)||0),w.games.game2[0].pT=(Number(w.games.game2[0].p1)||0)+(Number(w.games.game2[0].p2)||0)+(Number(w.games.game2[0].p3)||0)+(Number(w.games.game2[0].p4)||0),w.games.game3[0].pT=(Number(w.games.game3[0].p1)||0)+(Number(w.games.game3[0].p2)||0)+(Number(w.games.game3[0].p3)||0)+(Number(w.games.game3[0].p4)||0),w.games.game4[0].pT=(Number(w.games.game4[0].p1)||0)+(Number(w.games.game4[0].p2)||0)+(Number(w.games.game4[0].p3)||0)+(Number(w.games.game4[0].p4)||0),w.games.game5[0].pT=(Number(w.games.game5[0].p1)||0)+(Number(w.games.game5[0].p2)||0)+(Number(w.games.game5[0].p3)||0)+(Number(w.games.game5[0].p4)||0),w.games.game6[0].pT=(Number(w.games.game6[0].p1)||0)+(Number(w.games.game6[0].p2)||0)+(Number(w.games.game6[0].p3)||0)+(Number(w.games.game6[0].p4)||0),w.games.game7[0].pT=(Number(w.games.game7[0].p1)||0)+(Number(w.games.game7[0].p2)||0)+(Number(w.games.game7[0].p3)||0)+(Number(w.games.game7[0].p4)||0),w.games.game8[0].pT=(Number(w.games.game8[0].p1)||0)+(Number(w.games.game8[0].p2)||0)+(Number(w.games.game8[0].p3)||0)+(Number(w.games.game8[0].p4)||0),w.games.game9[0].pT=(Number(w.games.game9[0].p1)||0)+(Number(w.games.game9[0].p2)||0)+(Number(w.games.game9[0].p3)||0)+(Number(w.games.game9[0].p4)||0),w.games.game10[0].pT=(Number(w.games.game10[0].p1)||0)+(Number(w.games.game10[0].p2)||0)+(Number(w.games.game10[0].p3)||0)+(Number(w.games.game10[0].p4)||0),w.games.game11[0].pT=(Number(w.games.game11[0].p1)||0)+(Number(w.games.game11[0].p2)||0)+(Number(w.games.game11[0].p3)||0)+(Number(w.games.game11[0].p4)||0),w.games.game12[0].pT=(Number(w.games.game12[0].p1)||0)+(Number(w.games.game12[0].p2)||0)+(Number(w.games.game12[0].p3)||0)+(Number(w.games.game12[0].p4)||0),w.games.game13[0].pT=(Number(w.games.game13[0].p1)||0)+(Number(w.games.game13[0].p2)||0)+(Number(w.games.game13[0].p3)||0)+(Number(w.games.game13[0].p4)||0),w.games.game14[0].pT=(Number(w.games.game14[0].p1)||0)+(Number(w.games.game14[0].p2)||0)+(Number(w.games.game14[0].p3)||0)+(Number(w.games.game14[0].p4)||0),w.games.game15[0].pT=(Number(w.games.game15[0].p1)||0)+(Number(w.games.game15[0].p2)||0)+(Number(w.games.game15[0].p3)||0)+(Number(w.games.game15[0].p4)||0),w.games.game16[0].pT=(Number(w.games.game16[0].p1)||0)+(Number(w.games.game16[0].p2)||0)+(Number(w.games.game16[0].p3)||0)+(Number(w.games.game16[0].p4)||0),w.games.game17[0].pT=(Number(w.games.game17[0].p1)||0)+(Number(w.games.game17[0].p2)||0)+(Number(w.games.game17[0].p3)||0)+(Number(w.games.game17[0].p4)||0),w.games.game18[0].pT=(Number(w.games.game18[0].p1)||0)+(Number(w.games.game18[0].p2)||0)+(Number(w.games.game18[0].p3)||0)+(Number(w.games.game18[0].p4)||0),w.games.game19[0].pT=(Number(w.games.game19[0].p1)||0)+(Number(w.games.game19[0].p2)||0)+(Number(w.games.game19[0].p3)||0)+(Number(w.games.game19[0].p4)||0),w.games.game20[0].pT=(Number(w.games.game20[0].p1)||0)+(Number(w.games.game20[0].p2)||0)+(Number(w.games.game20[0].p3)||0)+(Number(w.games.game20[0].p4)||0),w.games.game21[0].pT=(Number(w.games.game21[0].p1)||0)+(Number(w.games.game21[0].p2)||0)+(Number(w.games.game21[0].p3)||0)+(Number(w.games.game21[0].p4)||0),w.games.game22[0].pT=(Number(w.games.game22[0].p1)||0)+(Number(w.games.game22[0].p2)||0)+(Number(w.games.game22[0].p3)||0)+(Number(w.games.game22[0].p4)||0),w.games.game23[0].pT=(Number(w.games.game23[0].p1)||0)+(Number(w.games.game23[0].p2)||0)+(Number(w.games.game23[0].p3)||0)+(Number(w.games.game23[0].p4)||0),w.games.game24[0].pT=(Number(w.games.game24[0].p1)||0)+(Number(w.games.game24[0].p2)||0)+(Number(w.games.game24[0].p3)||0)+(Number(w.games.game24[0].p4)||0);for(let a=1;a<=24;a++){let m="game".concat(a);e+=w.games[m][0].pT||0}return e},E=async()=>{if(w){w.punkte=S();let e={...w,timestamp:j};await fetch("/api/saveTeamData",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:f,teamData:e})}),i(a=>({...a,[w.name]:e}))}},D=(e,a,m,p)=>{let{value:g}=e.target;k(e=>{let s={...e.games};return s[a][m]={...s[a][m],[p]:g},{...e,games:s}})};return(0,p.jsxs)("main",{className:"flex min-h-screen flex-col p-8 pt-20 bg-pink-50 dark:bg-gray-900",children:[(0,p.jsx)("h1",{className:"text-3xl font-semibold text-center text-gray-900 dark:text-white",children:"Teams"}),(0,p.jsxs)("div",{className:"mt-6 flex justify-center space-x-4",children:[(0,p.jsx)("input",{type:"text",placeholder:"TEAM ID",value:t,onChange:e=>{r(e.target.value)},className:"text-gray-900 w-72 px-4 py-2 border-2 border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-pink-500 transition duration-200",id:"team"}),(0,p.jsx)("input",{type:"password",placeholder:"PIN",value:n,onChange:e=>{u(e.target.value)},className:"text-gray-900 w-72 px-4 py-2 border-2 border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-pink-500 transition duration-200"})]}),(0,p.jsx)("button",{onClick:()=>{let e=m.findIndex(e=>e.toLowerCase()===t.toLowerCase());if(-1!==e&&s[e].toLowerCase()===n.toLowerCase()){let a=m[e];v(a),k(o[a]),r(""),N(!0)}else y("No matching ID found or PIN is incorrect")},className:"".concat(l?"hidden":""," mt-6 py-2 px-6 bg-pink-500 text-white rounded-md hover:bg-pink-600 transition duration-200 focus:outline-none"),id:"loader",disabled:b,children:b?"Loading...":"Load Team"}),h&&(0,p.jsx)("p",{className:"mt-4 text-center text-red-500",children:h}),w&&(0,p.jsxs)("div",{className:"".concat(l?"visible":"hidden"," mt-8 p-6 bg-white shadow-lg rounded-md space-y-4"),children:["          ",(0,p.jsx)("h2",{className:"text-2xl font-semibold text-gray-900",children:"Edit Team"}),(0,p.jsx)("input",{type:"text",placeholder:"Team Name",value:w.name,onChange:e=>C(e,"name"),className:"w-full px-4 py-2 border-2 border-gray-300 rounded-md text-gray-900 focus:outline-none focus:ring-2 focus:ring-pink-500 transition duration-200"}),[1,2,3,4].map(e=>(0,p.jsx)("input",{type:"text",placeholder:"Player ".concat(e),value:w["player".concat(e)],onChange:a=>C(a,"player".concat(e)),className:"w-full px-4 py-2 border-2 border-gray-300 rounded-md text-gray-900 focus:outline-none focus:ring-2 focus:ring-pink-500 transition duration-200"},"player".concat(e))),(0,p.jsx)("button",{onClick:E,className:"mt-4 py-2 px-6 bg-pink-500 text-white rounded-md hover:bg-pink-600 transition duration-200 focus:outline-none",children:"Save Changes"}),(0,p.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Object.keys(w.games).map(e=>(0,p.jsxs)("div",{className:"p-4 bg-gray-100 rounded-md shadow-md space-y-2",children:[(0,p.jsxs)("h3",{className:"text-lg font-semibold text-gray-800",children:["Eintrag ",e.toUpperCase()]}),w.games[e].map((a,m)=>(0,p.jsx)("div",{className:"space-y-2",children:["p1","p2","p3","p4"].map((g,s)=>(0,p.jsx)("input",{type:"number",placeholder:"Player ".concat(s+1),value:a[g],onChange:a=>{let p=a.target.value;/^\d*$/.test(p)&&D(a,e,m,g)},className:"w-full px-4 py-2 border-2 border-gray-300 rounded-md text-gray-900 focus:outline-none focus:ring-2 focus:ring-pink-500 transition duration-200",disabled:d[s]},"".concat(e,"-").concat(m,"-").concat(g)))},"".concat(e,"-player-").concat(m)))]},e))})]})]})}}},function(e){e.O(0,[971,23,744],function(){return e(e.s=1069)}),_N_E=e.O()}]);