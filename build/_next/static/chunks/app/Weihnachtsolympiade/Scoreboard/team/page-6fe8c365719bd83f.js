(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[147],{1069:function(e,a,t){Promise.resolve().then(t.bind(t,5676))},5676:function(e,a,t){"use strict";t.d(a,{default:function(){return s}});var n=t(7437),r=t(2265);function s(e){let{teams:a}=e,{ids:t,pins:s}=a,[o,p]=(0,r.useState)(""),[i,l]=(0,r.useState)(""),[c,d]=(0,r.useState)({}),[m,u]=(0,r.useState)(!1),[g,h]=(0,r.useState)(!1),[y,f]=(0,r.useState)(null),[x,b]=(0,r.useState)(""),[w,N]=(0,r.useState)({name:"",punkte:"",player1:"",player2:"",player3:"",player4:"",games:{game1:[{p1:"",p2:"",p3:"",p4:"",pT:"",stamp:""}],game2:[{p1:"",p2:"",p3:"",p4:"",pT:"",stamp:""}],game3:[{p1:"",p2:"",p3:"",p4:"",pT:"",stamp:""}],game4:[{p1:"",p2:"",p3:"",p4:"",pT:"",stamp:""}],game5:[{p1:"",p2:"",p3:"",p4:"",pT:"",stamp:""}]}}),k=new Date(Date.now()).toLocaleString("de-DE",{day:"numeric",month:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"}),j=async e=>{u(!0),f(null);try{let a="/christmas/teams/".concat(e,".json");if(b(e),(await fetch(a,{method:"HEAD"})).ok){let t=await fetch(a),n=await t.json();d(a=>({...a,[e]:n}))}else{let a={name:"",punkte:"",player1:"",player2:"",player3:"",player4:"",games:{game1:[{p1:"",p2:"",p3:"",p4:"",pT:"",stamp:""}],game2:[{p1:"",p2:"",p3:"",p4:"",pT:"",stamp:""}],game3:[{p1:"",p2:"",p3:"",p4:"",pT:"",stamp:""}],game4:[{p1:"",p2:"",p3:"",p4:"",pT:"",stamp:""}],game5:[{p1:"",p2:"",p3:"",p4:"",pT:"",stamp:""}]}};d(t=>({...t,[e]:a})),await fetch("/api/saveTeamData",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e,teamData:a})})}}catch(e){f(e instanceof Error?e.message:"An unknown error occurred")}finally{u(!1)}};(0,r.useEffect)(()=>{t.length>0&&t.forEach(e=>{j(e)})},[t]);let T=(e,a)=>{let{value:t}=e.target;N(e=>({...e,[a]:t}))},v=async()=>{if(w){let e={...w,timestamp:k};await fetch("/api/saveTeamData",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:x,teamData:e})}),d(a=>({...a,[w.name]:e}))}},C=(e,a,t,n)=>{let{value:r}=e.target;N(e=>{let s={...e.games};return s[a][t]={...s[a][t],[n]:r},{...e,games:s}})};return(0,n.jsxs)("main",{className:"flex min-h-screen flex-col p-8 pt-20 bg-pink-50 dark:bg-gray-900",children:[(0,n.jsx)("h1",{className:"text-3xl font-semibold text-center text-gray-900 dark:text-white",children:"Teams"}),(0,n.jsxs)("div",{className:"mt-6 flex justify-center space-x-4",children:[(0,n.jsx)("input",{type:"text",placeholder:"TEAM ID",value:o,onChange:e=>{p(e.target.value)},className:"text-gray-900 w-72 px-4 py-2 border-2 border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-pink-500 transition duration-200",id:"team"}),(0,n.jsx)("input",{type:"text",placeholder:"PIN",value:i,onChange:e=>{l(e.target.value)},className:"text-gray-900 w-72 px-4 py-2 border-2 border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-pink-500 transition duration-200"})]}),(0,n.jsx)("button",{onClick:()=>{let e=t.findIndex(e=>e.toLowerCase()===o.toLowerCase());if(-1!==e&&s[e].toLowerCase()===i.toLowerCase()){let a=t[e];j(a),N(c[a]),p(""),h(!0)}else f("No matching team found or PIN is incorrect")},className:"".concat(g?"hidden":""," mt-6 py-2 px-6 bg-pink-500 text-white rounded-md hover:bg-pink-600 transition duration-200 focus:outline-none"),id:"loader",disabled:m,children:m?"Loading...":"Load Team"}),y&&(0,n.jsx)("p",{className:"mt-4 text-center text-red-500",children:y}),w&&(0,n.jsxs)("div",{className:"".concat(g?"visible":"hidden"," mt-8 p-6 bg-white shadow-lg rounded-md space-y-4"),children:["          ",(0,n.jsx)("h2",{className:"text-2xl font-semibold text-gray-900",children:"Edit Team"}),(0,n.jsx)("input",{type:"text",placeholder:"Team Name",value:w.name,onChange:e=>T(e,"name"),className:"w-full px-4 py-2 border-2 border-gray-300 rounded-md text-gray-900 focus:outline-none focus:ring-2 focus:ring-pink-500 transition duration-200"}),[1,2,3,4].map(e=>(0,n.jsx)("input",{type:"text",placeholder:"Player ".concat(e),value:w["player".concat(e)],onChange:a=>T(a,"player".concat(e)),className:"w-full px-4 py-2 border-2 border-gray-300 rounded-md text-gray-900 focus:outline-none focus:ring-2 focus:ring-pink-500 transition duration-200"},"player".concat(e))),(0,n.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Object.keys(w.games).map(e=>(0,n.jsxs)("div",{className:"p-4 bg-gray-100 rounded-md shadow-md space-y-2",children:[(0,n.jsxs)("h3",{className:"text-lg font-semibold text-gray-800",children:["Eintrag ",e.toUpperCase()]}),w.games[e].map((a,t)=>["p1","p2","p3","p4"].map((r,s)=>(0,n.jsx)("input",{type:"number",placeholder:"Player ".concat(s+1),value:a[r],onChange:a=>C(a,e,t,r),className:"w-full px-4 py-2 border-2 border-gray-300 rounded-md text-gray-900 focus:outline-none focus:ring-2 focus:ring-pink-500 transition duration-200"},"".concat(e,"-playerField"))))]},e))}),(0,n.jsx)("button",{onClick:v,className:"mt-4 py-2 px-6 bg-pink-500 text-white rounded-md hover:bg-pink-600 transition duration-200 focus:outline-none",children:"Save Changes"})]})]})}}},function(e){e.O(0,[971,23,744],function(){return e(e.s=1069)}),_N_E=e.O()}]);